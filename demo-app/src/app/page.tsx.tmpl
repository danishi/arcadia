// ============================================================================
// page.tsx â€” ãƒ›ãƒ¼ãƒ ç”»é¢ã‚¹ã‚±ãƒ«ãƒˆãƒ³
// ============================================================================
// {{DEMO_CONCEPT}} {{CLIENT_NAME}} ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰å€¤ã«ç½®æ›ã™ã‚‹ã€‚
// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ã€ç”»é¢ä¸€è¦§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€KPI ã‚µãƒãƒªã‚’è¡¨ç¤ºã™ã‚‹ã€‚
// ============================================================================

"use client";

import Link from "next/link";
import { useEffect, useState } from "react";
import { kpiMetrics } from "@/lib/mock-data";
import { formatNumber } from "@/lib/utils";
import { KpiTile } from "@/components/ui/kpi-tile";

// --- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆï¼ˆç·¨é›†ã—ã¦ãã ã•ã„ï¼‰ -------------------
const differentiators = [
  {
    title: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å‡¦ç†",
    description: "ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã§ãƒ‡ãƒ¼ã‚¿ã‚’å³åº§ã«åˆ†æå¯èƒ½",
    icon: "âš¡",
  },
  {
    title: "AI çµ±åˆåˆ†æ",
    description: "è‡ªç„¶è¨€èªã§ãƒ‡ãƒ¼ã‚¿ã‚’å•ã„åˆã‚ã›ã€æ–½ç­–ã‚’è‡ªå‹•ææ¡ˆ",
    icon: "âœ¦",
  },
  {
    title: "çµ±åˆãƒ‡ãƒ¼ã‚¿åŸºç›¤",
    description: "åˆ†æ•£ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ä¸€å…ƒç®¡ç†ã—å“è³ªã‚’ä¿è¨¼",
    icon: "â¬¡",
  },
  {
    title: "ã‚»ãƒ«ãƒ•ã‚µãƒ¼ãƒ“ã‚¹",
    description: "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ä¸è¦ã§ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´æ¥åˆ†æ",
    icon: "âš™",
  },
];

// --- ç”»é¢ä¸€è¦§ï¼ˆPhase 1ï¼‰ ---------------------------------------------------
const ph1Features = [
  {
    href: "/dashboard",
    title: "ãƒ‡ãƒ¼ã‚¿é€£æºãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
    description: "ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ç¨¼åƒçŠ¶æ³ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«å¯è¦–åŒ–",
    icon: "ğŸ“Š",
  },
  {
    href: "/analysis",
    title: "å¯¾è©±å‹ãƒ‡ãƒ¼ã‚¿åˆ†æ",
    description: "è‡ªç„¶è¨€èªã§ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ã‚°ãƒ©ãƒ•ã§è¡¨ç¤º",
    icon: "ğŸ”",
  },
  {
    href: "/scenario",
    title: "ã‚·ãƒŠãƒªã‚ªç®¡ç†",
    description: "AI ãŒæœ€é©ãªæ–½ç­–ã‚·ãƒŠãƒªã‚ªã‚’è‡ªå‹•ã§ææ¡ˆãƒ»ç®¡ç†",
    icon: "ğŸ“‹",
  },
];

// --- ç”»é¢ä¸€è¦§ï¼ˆPhase 2ï¼‰ ---------------------------------------------------
const ph2Features = [
  {
    href: "/journey",
    title: "ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒ“ãƒ«ãƒ€ãƒ¼",
    description: "é¡§å®¢ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ã‚’è¦–è¦šçš„ã«è¨­è¨ˆãƒ»æœ€é©åŒ–",
    icon: "ğŸ—º",
  },
  {
    href: "/engagement",
    title: "ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ",
    description: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã§é¡§å®¢æ¥ç‚¹ã‚’å¼·åŒ–",
    icon: "ğŸ’¬",
  },
  {
    href: "/realtime",
    title: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¢ãƒ‹ã‚¿ãƒ¼",
    description: "å…¨ãƒãƒ£ãƒãƒ«ã®é…ä¿¡çŠ¶æ³ã‚’ãƒ©ã‚¤ãƒ–ã§ç›£è¦–",
    icon: "âš¡",
  },
];

// --- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãæ•°å€¤ -------------------------------------------------
function AnimatedNumber({ target, suffix }: { target: number; suffix?: string }) {
  const [current, setCurrent] = useState(0);
  useEffect(() => {
    const duration = 800;
    const start = performance.now();
    const step = (now: number) => {
      const elapsed = now - start;
      const progress = Math.min(elapsed / duration, 1);
      const eased = 1 - Math.pow(1 - progress, 3);
      setCurrent(Math.floor(target * eased));
      if (progress < 1) requestAnimationFrame(step);
    };
    requestAnimationFrame(step);
  }, [target]);
  return (
    <>
      {formatNumber(current)}
      {suffix}
    </>
  );
}

// --- ãƒšãƒ¼ã‚¸æœ¬ä½“ -------------------------------------------------------------
export default function HomePage() {
  return (
    <div className="p-8 max-w-7xl mx-auto space-y-8">
      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
      <div>
        <h1 className="text-2xl font-bold text-text">
          {/* {{DEMO_CONCEPT}} */}
          æ¬¡ä¸–ä»£ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
        </h1>
        <p className="text-text-muted mt-1">
          {/* {{CLIENT_NAME}} å‘ã‘ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ */}
          ãƒ‡ãƒ¼ã‚¿åˆ†æã‹ã‚‰æ–½ç­–å®Ÿè¡Œã¾ã§ã‚’ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«
        </p>
      </div>

      {/* KPI ã‚µãƒãƒª */}
      <section>
        <h2 className="text-sm font-bold text-text-muted uppercase tracking-wider mb-4">
          ä¸»è¦æŒ‡æ¨™
        </h2>
        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
          {kpiMetrics.map((kpi) => (
            <KpiTile
              key={kpi.id}
              label={kpi.label}
              value={kpi.value}
              suffix={kpi.suffix}
              changePercent={kpi.changePercent}
              trend={kpi.trend}
              icon={kpi.icon}
            />
          ))}
        </div>
      </section>

      {/* å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆ */}
      <section>
        <h2 className="text-sm font-bold text-text-muted uppercase tracking-wider mb-4">
          ä¸»ãªç‰¹é•·
        </h2>
        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
          {differentiators.map((d) => (
            <div
              key={d.title}
              className="bg-surface rounded-xl border border-border p-5 hover:shadow-md transition-shadow"
            >
              <div className="text-2xl mb-3">{d.icon}</div>
              <h3 className="font-bold text-sm mb-1">{d.title}</h3>
              <p className="text-xs text-text-muted">{d.description}</p>
            </div>
          ))}
        </div>
      </section>

      {/* ç”»é¢ä¸€è¦§ â€” Phase 1 */}
      <section>
        <h2 className="text-sm font-bold text-text-muted uppercase tracking-wider mb-4">
          Phase 1 åŸºç›¤æ©Ÿèƒ½
        </h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          {ph1Features.map((f) => (
            <Link
              key={f.href}
              href={f.href}
              className="group bg-surface rounded-xl border border-border p-5 hover:border-primary hover:shadow-md transition-all"
            >
              <div className="text-2xl mb-3">{f.icon}</div>
              <h3 className="font-bold text-sm mb-1 group-hover:text-primary transition-colors">
                {f.title}
              </h3>
              <p className="text-xs text-text-muted">{f.description}</p>
            </Link>
          ))}
        </div>
      </section>

      {/* ç”»é¢ä¸€è¦§ â€” Phase 2 */}
      <section>
        <h2 className="text-sm font-bold text-text-muted uppercase tracking-wider mb-4">
          Phase 2 æ‹¡å¼µæ©Ÿèƒ½
          <span className="ml-2 text-[9px] font-bold px-1.5 py-0.5 rounded bg-primary text-white">
            NEXT
          </span>
        </h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          {ph2Features.map((f) => (
            <Link
              key={f.href}
              href={f.href}
              className="group bg-surface rounded-xl border border-border p-5 hover:border-primary hover:shadow-md transition-all opacity-80 hover:opacity-100"
            >
              <div className="text-2xl mb-3">{f.icon}</div>
              <h3 className="font-bold text-sm mb-1 group-hover:text-primary transition-colors">
                {f.title}
              </h3>
              <p className="text-xs text-text-muted">{f.description}</p>
            </Link>
          ))}
        </div>
      </section>
    </div>
  );
}
