# AWS Cloud Infrastructure Guide

AWS上でのインフラストラクチャ構成ガイド。`{{CLOUD_PROVIDER}}` = `AWS` の場合に参照する。

---

## 推奨リージョン

| 用途 | リージョン | 備考 |
|------|----------|------|
| **本番（主系）** | ap-northeast-1 (Tokyo) | 国内データ保管要件への対応 |
| **DR/バックアップ** | ap-northeast-3 (Osaka) | クロスリージョンレプリケーション先 |

## インフラ構成概要

```
AWS ap-northeast-1 (Tokyo)
├── VPC: {{VPC_NAME}} ({{VPC_CIDR}})
│   ├── Private Subnet (コントロールプレーン通信用)
│   │   └── NAT Gateway → Internet Gateway（制限付き）
│   ├── Private Subnet (データプレーン)
│   │   ├── {{PLATFORM_NAME}} コンピュートリソース
│   │   └── データ処理パイプライン
│   └── Private Subnet (プライベート接続)
│       ├── S3 VPC Endpoint (Gateway)
│       └── {{PLATFORM_NAME}} PrivateLink Endpoint
│
├── S3 バケット
│   ├── {{PROJECT_SLUG}}-landing       ← データ受信先
│   ├── {{PROJECT_SLUG}}-raw           ← Raw層データ
│   ├── {{PROJECT_SLUG}}-curated       ← 加工済データ
│   ├── {{PROJECT_SLUG}}-analytics     ← 分析用データ
│   ├── {{PROJECT_SLUG}}-staging       ← ワーク/一時データ
│   ├── {{PROJECT_SLUG}}-archive       ← アーカイブ (S3 Glacier)
│   ├── {{PROJECT_SLUG}}-exchange      ← システム間データ交換用
│   ├── {{PROJECT_SLUG}}-audit         ← 監査ログ長期保存
│   └── {{PROJECT_SLUG}}-backup        ← バックアップ先
│
├── IAM
│   ├── KMS CMK (S3暗号化用、AES-256)
│   ├── サービスロール（{{PLATFORM_NAME}}用）
│   └── CloudTrail → S3 (API操作ログ)
│
└── 監視・運用
    ├── CloudWatch Metrics / Alarms
    └── CloudWatch Logs → S3 (長期保存)

AWS ap-northeast-3 (Osaka)
├── S3 クロスリージョンレプリケーション先
└── [必要時] DR環境（フェイルオーバー用）
```

## セキュリティ設計

| 項目 | AWS実装 |
|------|---------|
| **通信暗号化** | TLS 1.2+ (ALB/NLB termination) |
| **保存データ暗号化** | SSE-KMS (CMK) |
| **アクセス制御** | IAM Role + S3 Bucket Policy |
| **ネットワーク分離** | VPC + Security Group + NACL |
| **監査ログ** | CloudTrail + Config Rules |
| **プライベート接続** | VPC Endpoint / PrivateLink |

## データ基盤との連携

| データ基盤 | 接続方式 | 認証 |
|-----------|---------|------|
| **Databricks** | PrivateLink (Backend + Frontend) | Instance Profile / IAM Role |
| **Snowflake** | AWS PrivateLink | Storage Integration (IAM Role) |

## MCP サーバー

| MCP Server | 用途 |
|------------|------|
| `aws-knowledge` | AWS サービスドキュメント参照 |

---

*Generated by ARCADIA Framework - Platform Templates*
